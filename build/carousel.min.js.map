{"version":3,"sources":["carousel.js"],"names":["window","document","navigator","_this","this","carousels","mediaQueries","mmcival","nomatchival","onMatchMediaChange","e","matches","h","each","c","hasMediaQueries","clearTimeout","media","changeMedia","setTimeout","maxTouchPoints","msMaxTouchPoints","getByClass","el","cls","one","getElementsByClassName","length","undefined","getByTag","tag","getElementsByTagName","mkel","attr","createElement","i","keys","what","cb","cbres","call","addMediaQuery","mq","addListener","setPercentTouchThreshold","val","conf","w","outerWidth","px","Math","abs","round","closest","node","selector","parentNode","test","console","error","debounce","f","t","_this2","later","apply","args","cn","Carousel","_this3","config","delay","touchthreshold","swipeRubberBand","_cfg","push","_ds","carouselIndicators","slider","useIndicators","indicators","currPos","_percentTouchThreshold","_hasmedia","dataset","carouselWrapper","wrapper","staticTextElem","isTouch","element","classList","add","items","tmp","Item","pos","addResize","autoHeight","setAutoHeight","carouselDelay","parseInt","carouselTransition","transition","carouselTouchThreshold","carouselRubberbandSwipe","load","play","prototype","sliderAnimate","on","remove","currentItem","ivalId","my","next","pause","goto","next_prev","_loadIfNecessary","setIndicator","carouselPos","activate","_this4","item","size","isLoaded","_setupTouchEvents","_this5","x","y","startX","_","getEvent","changedTouches","initStart","clientX","clientY","abort","touchendIval","addEventListener","te","diff","requestAnimationFrame","removeProperty","style","startDiff","left","offsetLeft","nleft","preventDefault","touchMove","setTouchMove","_this6","inds","ind","class","forEach","appendChild","Indicator","btn","index","deActivate","_this7","ci","calcHeight","img","src","width","visibility","body","position","height","wait","clickBack","owner","_this8","credit","mediaSizes","href","carouselHref","hasImg","carousel","keepImg","carouselKeepImg","carouselAutoHeight","creditElem","res","location","defaultSrc","defaultCred","carouselSrc","_collectMediaSizes","carouselPhotoCredit","k","sort","matchMedia","_typeof","display","_this9","st","_cb","cursor","sizes","sizesrc","cred","a","m","match","slen","str","_setSrc","_this10","imgsrc","setAttribute","backgroundImage","textContent","cs"],"mappings":"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","file":"carousel.min.js","sourcesContent":["/*\n  Author: Pontus Ã–stlund <https://profiles.google.com/poppanator>\n*/\n\n// jshint esversion: 6, undef: true, unused: true\n/* global window, document, setTimeout, clearTimeout, requestAnimationFrame,\n          console\n*/\n\n\n(function(window, document, navigator) {\n  'use strict';\n\n  // const werror = window.console.log;\n\n  // Storage for all created carousels.\n  const carousels = [];\n\n  // Storage for match media sizes.\n  const mediaQueries = {};\n\n  // When we get a media match we don't act upon it immediately but only\n  // execute on the last one.\n  // This is the interval ids for matches and no\n  // matches. The latter is needed if no media is matched, in which case we\n  // need to set the default media.\n  let mmcival, nomatchival;\n  const onMatchMediaChange = function(e) {\n    if (e.matches) {\n      h.each(carousels, c => {\n        if (c.hasMediaQueries()) {\n          if (mmcival) {\n            clearTimeout(mmcival);\n          }\n\n          if (nomatchival) {\n            clearTimeout(nomatchival);\n          }\n\n          mmcival = setTimeout(() => {\n            mmcival = null;\n            nomatchival = null;\n            c.changeMedia(e.media);\n          }, 5);\n        }\n      });\n    }\n    else if (!mmcival) {\n      if (nomatchival) {\n        clearTimeout(nomatchival);\n      }\n      nomatchival = setTimeout(() => {\n        h.each(carousels, c => {\n          if (c.hasMediaQueries()) {\n            c.changeMedia();\n          }\n        });\n        mmcival = null;\n        nomatchival = null;\n      }, 5);\n    }\n  };\n\n  const isTouch = (('ontouchstart' in window)       ||\n                   (navigator.maxTouchPoints   > 0) ||\n                   (navigator.msMaxTouchPoints > 0));\n\n\n  /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*\n   |                                                                         |\n   *                                Helpers                                  *\n   |                                                                         |\n   *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*/\n\n  const h = {\n    // Get elements by class name\n    getByClass: function(el, cls, one) {\n      const e = el.getElementsByClassName(cls);\n\n      if (one && e.length) {\n        return e[0];\n      }\n\n      return e.length && e || undefined;\n    },\n\n    // Get elements by tag name\n    getByTag: function(el, tag, one) {\n      const e = el.getElementsByTagName(tag);\n\n      if (one) {\n        if (e && e.length) {\n          return e[0];\n        }\n      }\n\n      return e;\n    },\n\n    // Create element\n    mkel: function(tag, attr) {\n      var e = document.createElement(tag);\n\n      if (attr) {\n        const keys = Object.keys(attr);\n        for (let i = 0; i < keys.length; i++) {\n          e.setAttribute(keys[i], attr[keys[i]]);\n        }\n      }\n\n      return e;\n    },\n\n    // Iterate over what and call cb on each iteration. If cb returns\n    // false the loop is escaped.\n    each: (what, cb) => {\n      let cbres;\n      for (let i = 0; i < what.length; i++) {\n        cbres = cb.call(this, what[i]);\n        if (cbres === false) {\n          break;\n        }\n      }\n    },\n\n    // Add media query to check in window.matchMedia\n    addMediaQuery: (mq) => {\n      if (!mediaQueries[mq]) {\n        mediaQueries[mq] = true;\n        window.matchMedia(mq).addListener(onMatchMediaChange);\n      }\n    },\n\n    // Calculate the swipe threshold in percent if that's requested\n    // FIXME: This does not work as expected in an actual iPhone.\n    setPercentTouchThreshold: function (val, conf) {\n      const w = window.outerWidth;\n      const px = Math.abs(Math.round(w / (100/val)));\n      conf.touchthreshold = px;\n    },\n\n    // Same as Element.closest, which is used if available.\n    closest: (node, selector) => {\n      if (node.closest) {\n        return node.closest(selector);\n      }\n\n      try {\n        do {\n          node = node.parentNode;\n\n          if (node) {\n            const test = node.querySelector(selector);\n\n            if (test) {\n              return test;\n            }\n          }\n        } while (node);\n      }\n      catch (e) {\n        console.error(e);\n        return null;\n      }\n    },\n\n    debounce: (f, w, i) => {\n      let t;\n      return function() {\n        let args = arguments;\n        let later = () => {\n          t = null;\n          if (!i) f.apply(this, args);\n        };\n\n        let cn = i && !t;\n        clearTimeout(t);\n        t = setTimeout(later, w);\n        if (cn) {\n          f.apply(this, args);\n        }\n      };\n    }\n  };\n\n\n  /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*\n   |                                                                         |\n   *                                Carousel                                 *\n   |                                                                         |\n   *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*/\n\n  /*\n    Creates a new Carousel object\n    @param HTMLElement el\n  */\n  const Carousel = function(el) {\n    this.config = {\n      delay:          8000,\n      transition:     'slide',\n      touchthreshold: 80,\n      // This must at least be 1 (no rubber band effect)\n      swipeRubberBand: 1\n    };\n\n    const _ds = el.dataset,\n      _cfg = this.config;\n\n    carousels.push(this);\n\n    this.element       = el;\n    this.useIndicators = _ds.carouselIndicators !== undefined;\n    // Storage for Carousel.Indicator objects\n    this.indicators    = [];\n    this.slider        = h.getByClass(el, 'carousel-slider', true);\n    // Storage for Carousel.Item objects\n    this.items         = [];\n    // Interval ID for transitions between items\n    this.ivalId        = null;\n    // Current item\n    this.currPos       = 0;\n    // Flag for if multiple image sources are used.\n    // -1 = not checked\n    //  0 = no\n    //  1 = yes\n    this._hasmedia     = -1;\n\n    // If non-zero the swipe threshold is in percentage of the screen width\n    this._percentTouchThreshold = 0;\n\n    this.wrapper = el.dataset.carouselWrapper;\n\n    if (this.wrapper) {\n      this.wrapper = h.closest(el, this.wrapper);\n    }\n\n    this.staticTextElem = h.getByClass(el, 'carousel-static-text', true);\n\n    if (isTouch) {\n      this.element.classList.add('carousel-is-touch');\n    }\n\n    let items = h.getByClass(this.slider, 'carousel-item');\n    let pos = 0, tmp;\n\n    h.each(items, el => {\n      this.items.push(new Carousel.Item(el, pos++, this));\n    });\n\n    if (this.wrapper) {\n      let addResize = false;\n      for (let i = 0; i < this.items.length; i++) {\n        if (this.items[i].autoHeight) {\n          addResize = true;\n          break;\n        }\n      }\n\n      if (addResize) {\n        window.addEventListener(\n          'resize',\n          h.debounce(() => {\n            this.setAutoHeight();\n          }, 100),\n          true\n        );\n      }\n    }\n\n    if (_ds.carouselDelay) {\n      _cfg.delay = parseInt(_ds.carouselDelay, 10);\n    }\n\n    if (_ds.carouselTransition) {\n      _cfg.transition = _ds.carouselTransition;\n    }\n\n    if (isTouch && _ds.carouselTouchThreshold) {\n      tmp = _ds.carouselTouchThreshold;\n      if (tmp[tmp.length - 1] === '%') {\n        this._percentTouchThreshold = parseInt(tmp, 10);\n        h.setPercentTouchThreshold(this._percentTouchThreshold, _cfg);\n      }\n      else {\n        _cfg.touchthreshold = parseInt(tmp, 10);\n      }\n    }\n\n    if (_ds.carouselRubberbandSwipe) {\n      tmp = parseFloat(_ds.carouselRubberbandSwipe, 10);\n\n      if (tmp > 1) {\n        _cfg.swipeRubberBand = tmp;\n      }\n    }\n\n    if (this.items.length) {\n      this.items[0].load();\n      this.items[0].activate();\n    }\n\n    if (this.items.length > 1) {\n      this.items[1].load();\n      this._makeIndicators();\n    }\n\n    if (isTouch) {\n      this._setupTouchEvents();\n    }\n\n    if (this.items.length > 1) {\n      this.play();\n    }\n  };\n\n  /*\n    Toggle add/remove the animate class on the slider\n  */\n  Carousel.prototype.sliderAnimate = function(on) {\n    if (on) {\n      this.slider.classList.add('animate');\n    }\n    else {\n      this.slider.classList.remove('animate');\n    }\n  };\n\n  Carousel.prototype.currentItem = function() {\n    return this.items[this.currPos];\n  };\n\n  /*\n    Start the auto play\n  */\n  Carousel.prototype.play = function() {\n    if (this.ivalId) {\n      clearTimeout(this.ivalId);\n    }\n\n    const my = this;\n\n    this.ivalId = setTimeout(() => {\n      my.next();\n      my.play();\n    }, this.config.delay);\n  };\n\n  /*\n    Pause the auto play\n  */\n  Carousel.prototype.pause = function() {\n    clearTimeout(this.ivalId);\n    this.sliderAnimate(false);\n  };\n\n  /*\n    Move to the next item\n  */\n  Carousel.prototype.next = function() {\n    this.currPos += 1;\n    if (this.currPos >= this.items.length) {\n      this.currPos = 0;\n    }\n\n    this.goto(this.currPos);\n  };\n\n  /*\n    Goto the item at @pos\n  */\n  Carousel.prototype.goto = function(pos) {\n    if (pos < 0) {\n      pos = this.items.length - 1;\n    }\n    else if (pos >= this.items.length) {\n      pos = 0;\n    }\n\n    const next_prev = pos < this.currPos ? pos - 1 : pos + 1;\n\n    clearTimeout(this.ivalId);\n\n    this.sliderAnimate(true);\n    this._loadIfNecessary(pos);\n    this._loadIfNecessary(next_prev);\n    this.setIndicator(pos);\n    this.slider.dataset.carouselPos = pos;\n    this.currPos = pos;\n    this.items[pos].activate();\n    this.play();\n  };\n\n  /*\n    Check if any of the images in the items has multiple images for different\n    device widths\n  */\n  Carousel.prototype.hasMediaQueries = function() {\n    if (this._hasmedia !== -1) {\n      return !!this._hasmedia;\n    }\n\n    h.each(this.items, item => {\n      if (item.hasMediaQueries) {\n        this._hasmedia = 1;\n        return false;\n      }\n    });\n\n    if (this._hasmedia === -1) {\n      this._hasmedia = 0;\n    }\n\n    return !!this._hasmedia;\n  };\n\n\n  /*\n    Media has changes, change images in the items if neccessary\n  */\n  Carousel.prototype.changeMedia = function(size) {\n    if (this._percentTouchThreshold) {\n      h.setPercentTouchThreshold(this._percentTouchThreshold, this.config);\n    }\n\n    h.each(this.items, item => {\n      if (item.hasMediaQueries) {\n        item.changeMedia(size);\n      }\n    });\n\n    this.setAutoHeight();\n  };\n\n\n  /*\n    Load the image in item @pos if it's not already loaded\n  */\n  Carousel.prototype._loadIfNecessary = function(pos) {\n    if (pos >= 0 && pos < this.items.length) {\n      if (!this.items[pos].isLoaded) {\n        this.items[pos].load();\n      }\n    }\n  };\n\n\n  /*\n    Setup touch events\n  */\n  Carousel.prototype._setupTouchEvents = function() {\n    // Used to store the touch start/drag positions\n    const x = {\n      x: 0,\n      y: 0,\n      startX: 0\n    };\n\n    const _ = this;\n\n    const getEvent = function(e) {\n      return e.changedTouches[0];\n    };\n\n    const initStart = function(e) {\n      x.x = e.clientX;\n      x.y = e.clientY;\n      x.startX = e.clientX;\n    };\n\n    const slider = this.slider;\n\n    let abort = false;\n    let touchendIval;\n\n    slider.addEventListener('touchstart', e => {\n      if (touchendIval) {\n        clearTimeout(touchendIval);\n      }\n      const te = getEvent(e);\n      initStart(te);\n      this.element.classList.add('carousel-is-touchdrag');\n      _.pause();\n    }, false);\n\n    slider.addEventListener('touchend', e => {\n      touchendIval = setTimeout(() => {\n        _.element.classList.remove('carousel-is-touchdrag');\n      }, 1000);\n\n\n      // The rotation has occured in touchmove so abort.\n      if (abort) {\n        abort = false;\n        return;\n      }\n\n      const te = getEvent(e);\n      let diff = te.clientX - x.x;\n\n      if (Math.abs(diff) < _.config.touchthreshold) {\n        _.sliderAnimate(true);\n        requestAnimationFrame(() => {\n          slider.style.removeProperty('left');\n        });\n      }\n\n      _.play();\n\n    }, false);\n\n    slider.addEventListener('touchcancel', () => {\n      _.element.classList.remove('carousel-is-touchdrag');\n      slider.style.removeProperty('left');\n      _.play();\n    }, false);\n\n    const touchMove = (e) => {\n      const te        = getEvent(e);\n      const diff      = te.clientX - x.x;\n      const startDiff = te.clientX - x.startX;\n      const left      = slider.offsetLeft;\n      x.x = te.clientX;\n      let nleft = left+(diff/(_.config.swipeRubberBand||1));\n\n      if (Math.abs(startDiff) > _.config.touchthreshold) {\n        e.preventDefault();\n        abort = true;\n\n        slider.style.removeProperty('left');\n        slider.removeEventListener('touchmove', touchMove, false);\n\n        if (diff > 0) {\n          _._loadIfNecessary(_.currPos-1);\n          _.goto(_.currPos-1);\n        }\n        else if (diff < 0) {\n          _._loadIfNecessary(_.currPos+1);\n          _.goto(_.currPos+1);\n        }\n\n        setTimeout(() => {\n          initStart(te);\n          setTouchMove();\n        }, 600);\n\n        return false;\n      }\n\n      slider.style.left = nleft + 'px';\n    };\n\n    const setTouchMove = () => {\n      slider.addEventListener('touchmove', touchMove, false);\n    };\n\n    setTouchMove();\n  };\n\n  /*\n    Create the indicators\n  */\n  Carousel.prototype._makeIndicators = function() {\n    if (!this.useIndicators || this.items.length < 2) {\n      return;\n    }\n\n    let ind = h.getByClass(this.element, 'carousel-indicators', true);\n    const inds = [];\n\n    if (!ind) {\n      ind = h.mkel('div', { class: 'carousel-indicators' });\n    }\n\n    this.items.forEach(() => {\n      const i = new Carousel.Indicator(this, inds.length);\n      ind.appendChild(i.btn);\n      inds.push(i);\n    });\n\n    inds[0].activate();\n\n    this.element.appendChild(ind);\n    this.indicators = inds;\n  };\n\n  /*\n    Activate the indicator at position @index\n  */\n  Carousel.prototype.setIndicator = function(index) {\n    if (!this.useIndicators || this.items.length < 2) {\n      return;\n    }\n\n    if (index === undefined) {\n      index = this.currPos;\n    }\n\n    this.currPos = index;\n\n    this.indicators.forEach(ind => {\n      ind.deActivate();\n    });\n\n    this.indicators[index].activate();\n  };\n\n  Carousel.prototype.setAutoHeight = function() {\n    if (this.wrapper) {\n      const ci = this.currentItem();\n\n      if (ci.autoHeight) {\n        const calcHeight = () => {\n          const tmp = h.mkel('img', { src: ci.img.src, width: ci.img.width });\n          tmp.style.visibility = 'hidden';\n          tmp.style.position = 'absolute';\n          document.body.appendChild(tmp);\n          const height = tmp.height;\n          document.body.removeChild(tmp);\n          return height;\n        };\n\n        const wait = () => {\n          if (ci.isLoaded) {\n            const height = calcHeight();\n            this.wrapper.classList.add('carousel-auto-height');\n            this.wrapper.style.height = height + 'px';\n            this.wrapper.style.minHeight = '0px';\n          }\n          else {\n            requestAnimationFrame(wait);\n          }\n        };\n\n        wait();\n      }\n      else  {\n        this.wrapper.classList.remove('carousel-auto-height');\n        this.wrapper.style.removeProperty('height');\n        this.wrapper.style.removeProperty('min-height');\n      }\n    }\n  };\n\n  /*\n    If defined and a function it will be called on eventual clicks.\n    Return false to abort click.\n\n    Carousel.clickBack = function(item) {\n      // To something...\n      return false;\n    };\n  */\n  Carousel.clickBack = null;\n\n  /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*\n   |                                                                         |\n   *                            Carousel.Item                                *\n   |                                                                         |\n   *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*/\n\n  Carousel.Item = function(el, pos, owner) {\n    this.mediaQueries    = {};\n    this.hasMediaQueries = false;\n    this.img             = h.getByTag(el, 'img', true);\n    this.element         = el;\n    this.isLoaded        = false;\n    this.src             = null;\n    this.credit          = null;\n    this.mediaSizes      = null;\n    this.href            = el.dataset.carouselHref;\n    this.position        = pos;\n    this.hasImg          = this.img.length === undefined;\n    this.carousel        = owner;\n    this.keepImg         = el.dataset.carouselKeepImg !== undefined;\n    this.autoHeight      = el.dataset.carouselAutoHeight !== undefined;\n    this.creditElem      = h.mkel('div', { class: 'carousel-photo-credit ' +\n                                                  'carousel-hidden' });\n\n    if (this.keepImg) {\n      this.element.classList.add('carousel-item-keep-img');\n    }\n\n    this.element.setAttribute('data-carousel-position', pos);\n    this.element.appendChild(this.creditElem);\n\n    if (this.href) {\n      el.addEventListener('click', (e) => {\n        e.preventDefault();\n        if (typeof Carousel.clickBack === 'function') {\n          const res = Carousel.clickBack(this);\n          if (res === false) {\n            return;\n          }\n        }\n        document.location.href = this.href;\n      }, true);\n    }\n\n    if (this.hasImg) {\n      this.defaultSrc = this.img.dataset.carouselSrc;\n      this.defaultCred = this.img.dataset.carouselPhotoCredit;\n      this._collectMediaSizes();\n\n      const keys = Object.keys(this.mediaQueries).sort();\n      let k;\n\n      for (let i = 0; i < keys.length; i++) {\n        k = keys[i];\n\n        if (window.matchMedia(k).matches) {\n          this.src = this.mediaQueries[k];\n          if (typeof this.src === 'object') {\n            this.credit = this.src.credit;\n            this.src = this.src.img;\n          }\n        }\n      }\n\n      if (!this.src) {\n        this.src = this.defaultSrc;\n      }\n\n      if (!this.credit) {\n        this.credit = this.defaultCred;\n      }\n\n      if (!this.keepImg) {\n        this.img.style.display = 'none';\n      }\n    }\n  };\n\n  Carousel.Item.prototype.activate = function() {\n    this.carousel.setAutoHeight();\n\n    const st = this.carousel.staticTextElem;\n    if (st) {\n      const cb = () => {\n        document.location.href = this.href;\n      };\n      if (st._cb) {\n        st.removeEventListener('click', st._cb);\n      }\n      if (this.href) {\n        st.addEventListener('click', cb, false);\n        st._cb = cb;\n        st.style.cursor = 'pointer';\n      }\n      else {\n        st.style.cursor = 'default';\n      }\n    }\n  };\n\n  /*\n    Load the image matching the media size @size\n  */\n  Carousel.Item.prototype.changeMedia = function(size) {\n    const src = this.mediaQueries[size] || this.defaultSrc;\n\n    if (typeof src === 'object') {\n      this.src = src.img || this.defaultSrc;\n      this.credit = src.credit || this.defaultCred;\n    }\n    else {\n      this.src = src;\n      this.credit = this.defaultCred;\n    }\n\n    if (this.isLoaded) {\n      this.load();\n    }\n  };\n\n\n  /*\n    Collect eventual multiple media size image sources\n  */\n  Carousel.Item.prototype._collectMediaSizes = function() {\n    let m, sizes = [], sizesrc = {}, cred = {};\n\n    for (let a in this.img.dataset){\n      m = a.match(/(?:carousel)Mq-(\\d+)$/);\n\n      if (m) {\n        this.hasMediaQueries = true;\n        m = parseInt(m[1], 10);\n        sizes.push(m);\n        sizesrc[m] = this.img.dataset[a];\n      }\n      else {\n        m = a.match(/(?:carouselPhotoCredit)Mq-(\\d+)$/);\n        if (m) {\n          m = parseInt(m[1], 10);\n          cred[m] = this.img.dataset[a];\n        }\n      }\n    }\n\n    let slen = sizes.length;\n\n    if (slen) {\n      let a, str, val;\n      sizes.sort();\n\n      for (let i = 0; i < slen; i++) {\n        a   = sizes[i];\n        str = `(min-width: ${a+1}px)`;\n\n        if (i + 1 < sizes.length) {\n          str = `(max-width: ${sizes[i+1]}px) and ` + str;\n        }\n\n        val = sizesrc[a];\n\n        if (cred[a]) {\n          val = { img: val, credit: cred[a] };\n        }\n\n        this.mediaQueries[str] = val;\n        h.addMediaQuery(str);\n      }\n\n      this.mediaSizes = sizes;\n    }\n  };\n\n  /*\n    Load the current image source.\n  */\n  Carousel.Item.prototype.load = function() {\n    if (this.hasImg) {\n      this._setSrc(this.src);\n    }\n  };\n\n  /*\n    Set the src attribute to @src and add it as background image on the\n    item when the image is loaded.\n  */\n  Carousel.Item.prototype._setSrc = function(src) {\n    if (this.hasImg) {\n      this.isLoaded = false;\n      let imgsrc = src;\n\n      if (typeof src === 'object') {\n        imgsrc = src.img;\n      }\n\n      this.img.setAttribute('src', imgsrc);\n      this.img.onload = () => {\n        if (!this.keepImg) {\n          this.element.style.backgroundImage = `url(${imgsrc})`;\n        }\n        this.isLoaded = true;\n      };\n\n      if (this.credit) {\n        this.creditElem.textContent = this.credit;\n        this.creditElem.classList.remove('carousel-hidden');\n      }\n      else {\n        this.creditElem.textContent = '';\n        this.creditElem.classList.add('carousel-hidden');\n      }\n    }\n  };\n\n  /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*\n   |                                                                         |\n   *                          Carousel.Indicator                             *\n   |                                                                         |\n   *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*/\n\n  Carousel.Indicator = function(owner, index) {\n    const _ = this;\n    this.index = index;\n    this.owner = owner;\n    this.btn = h.mkel('a', { class: 'carousel-indicator',\n                             href: '#carousel-' + index });\n    this.btn.appendChild(h.mkel('span', { class: 'carousel-indicator-inner' }));\n    this.btn.addEventListener('click', (e) => {\n      e.preventDefault();\n      _.owner.goto(_.index);\n      return false;\n    }, true);\n  };\n\n  /*\n    Activate this indicator\n  */\n  Carousel.Indicator.prototype.activate = function() {\n    this.btn.classList.add('carousel-indicator-active');\n  };\n\n  /*\n    Deactivate this indicator\n  */\n  Carousel.Indicator.prototype.deActivate = function() {\n    this.btn.classList.remove('carousel-indicator-active');\n  };\n\n  window.addEventListener('DOMContentLoaded', () => {\n    const cs = h.getByClass(document, 'carousel');\n\n    if (cs && cs.length) {\n      h.each(cs, el => {\n        new Carousel(el);\n      });\n    }\n  });\n\n  Carousel.carousels = carousels;\n  window.Carousel = Carousel;\n\n}(window, document, window.navigator));\n"]}