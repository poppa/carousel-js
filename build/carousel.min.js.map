{"version":3,"sources":["carousel.js"],"names":["window","document","navigator","mmcival","nomatchival","_this","this","carousels","onMatchMediaChange","e","matches","clearTimeout","setTimeout","media","h","each","c","hasMediaQueries","changeMedia","isTouch","maxTouchPoints","msMaxTouchPoints","getByClass","el","cls","one","length","undefined","getByTag","tag","getElementsByTagName","mkel","attr","createElement","cbres","keys","Object","what","cb","call","i","matchMedia","closest","mq","node","mediaQueries","addListener","setPercentTouchThreshold","val","conf","w","test","px","Math","abs","round","touchthreshold","selector","t","arguments","f","querySelector","cn","console","error","debounce","_this2","args","later","apply","delay","transition","Carousel","_this3","config","swipeRubberBand","wrapper","_cfg","push","useIndicators","classList","add","items","pos","ivalId","currPos","_hasmedia","dataset","carouselWrapper","carouselDelay","_ds","carouselTransition","carouselTouchThreshold","_percentTouchThreshold","parseInt","Item","tmp","parseFloat","autoHeight","addResize","setAutoHeight","_setupTouchEvents","prototype","carouselRubberbandSwipe","load","activate","sliderAnimate","play","on","slider","currentItem","my","pause","next","_loadIfNecessary","next_prev","setIndicator","carouselPos","_this4","getEvent","changedTouches","x","clientX","item","clientY","startX","addEventListener","touchendIval","element","size","abort","remove","style","removeProperty","startDiff","setTouchMove","y","diff","_","_makeIndicators","initStart","te","_this5","inds","ind","appendChild","indicators","requestAnimationFrame","index","forEach","deActivate","touchMove","left","offsetLeft","calcHeight","nleft","width","ci","preventDefault","body","height","wait","_this6","class","isLoaded","Indicator","src","btn","credit","position","carousel","keepImg","defaultCred","carouselPhotoCredit","_collectMediaSizes","k","img","visibility","removeChild","_this7","minHeight","location","href","clickBack","owner","_this8","mediaSizes","carouselHref","hasImg","carouselKeepImg","sizes","carouselAutoHeight","sizesrc","match","m","str","defaultSrc","carouselSrc","cred","sort","a","addMediaQuery","_typeof","display","_this9","imgsrc","staticTextElem","st","setAttribute","onload","_cb","removeEventListener","creditElem","cs","slen","concat","_setSrc","_this10","backgroundImage","textContent"],"mappings":"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","file":"carousel.min.js","sourcesContent":["/*\n  Author: Pontus Ã–stlund <https://github.com/poppa>\n*/\n\n// jshint esversion: 6, undef: true, unused: true\n/* global window, document, setTimeout, clearTimeout, requestAnimationFrame,\n          console\n*/\n\n\n(function(window, document, navigator) {\n  'use strict';\n\n  // const werror = window.console.log;\n\n  // Storage for all created carousels.\n  const carousels = [];\n\n  // Storage for match media sizes.\n  const mediaQueries = {};\n\n  // When we get a media match we don't act upon it immediately but only\n  // execute on the last one.\n  // This is the interval ids for matches and no\n  // matches. The latter is needed if no media is matched, in which case we\n  // need to set the default media.\n  let mmcival, nomatchival;\n  const onMatchMediaChange = function(e) {\n    if (e.matches) {\n      h.each(carousels, c => {\n        if (c.hasMediaQueries()) {\n          if (mmcival) {\n            clearTimeout(mmcival);\n          }\n\n          if (nomatchival) {\n            clearTimeout(nomatchival);\n          }\n\n          mmcival = setTimeout(() => {\n            mmcival = null;\n            nomatchival = null;\n            c.changeMedia(e.media);\n          }, 5);\n        }\n      });\n    }\n    else if (!mmcival) {\n      if (nomatchival) {\n        clearTimeout(nomatchival);\n      }\n      nomatchival = setTimeout(() => {\n        h.each(carousels, c => {\n          if (c.hasMediaQueries()) {\n            c.changeMedia();\n          }\n        });\n        mmcival = null;\n        nomatchival = null;\n      }, 5);\n    }\n  };\n\n  const isTouch = (('ontouchstart' in window)       ||\n                   (navigator.maxTouchPoints   > 0) ||\n                   (navigator.msMaxTouchPoints > 0));\n\n\n  /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*\n   |                                                                         |\n   *                                Helpers                                  *\n   |                                                                         |\n   *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*/\n\n  const h = {\n    // Get elements by class name\n    getByClass: function(el, cls, one) {\n      const e = el.getElementsByClassName(cls);\n\n      if (one && e.length) {\n        return e[0];\n      }\n\n      return e.length && e || undefined;\n    },\n\n    // Get elements by tag name\n    getByTag: function(el, tag, one) {\n      const e = el.getElementsByTagName(tag);\n\n      if (one) {\n        if (e && e.length) {\n          return e[0];\n        }\n      }\n\n      return e;\n    },\n\n    // Create element\n    mkel: function(tag, attr) {\n      var e = document.createElement(tag);\n\n      if (attr) {\n        const keys = Object.keys(attr);\n        for (let i = 0; i < keys.length; i++) {\n          e.setAttribute(keys[i], attr[keys[i]]);\n        }\n      }\n\n      return e;\n    },\n\n    // Iterate over what and call cb on each iteration. If cb returns\n    // false the loop is escaped.\n    each: (what, cb) => {\n      let cbres;\n      for (let i = 0; i < what.length; i++) {\n        cbres = cb.call(this, what[i]);\n        if (cbres === false) {\n          break;\n        }\n      }\n    },\n\n    // Add media query to check in window.matchMedia\n    addMediaQuery: (mq) => {\n      if (!mediaQueries[mq]) {\n        mediaQueries[mq] = true;\n        window.matchMedia(mq).addListener(onMatchMediaChange);\n      }\n    },\n\n    // Calculate the swipe threshold in percent if that's requested\n    // FIXME: This does not work as expected in an actual iPhone.\n    setPercentTouchThreshold: function (val, conf) {\n      const w = window.outerWidth;\n      const px = Math.abs(Math.round(w / (100/val)));\n      conf.touchthreshold = px;\n    },\n\n    // Same as Element.closest, which is used if available.\n    closest: (node, selector) => {\n      if (node.closest) {\n        return node.closest(selector);\n      }\n\n      try {\n        do {\n          node = node.parentNode;\n\n          if (node) {\n            const test = node.querySelector(selector);\n\n            if (test) {\n              return test;\n            }\n          }\n        } while (node);\n      }\n      catch (e) {\n        console.error(e);\n        return null;\n      }\n    },\n\n    debounce: (f, w, i) => {\n      let t;\n      return function() {\n        let args = arguments;\n        let later = () => {\n          t = null;\n          if (!i) f.apply(this, args);\n        };\n\n        let cn = i && !t;\n        clearTimeout(t);\n        t = setTimeout(later, w);\n        if (cn) {\n          f.apply(this, args);\n        }\n      };\n    }\n  };\n\n\n  /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*\n   |                                                                         |\n   *                                Carousel                                 *\n   |                                                                         |\n   *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*/\n\n  /*\n    Creates a new Carousel object\n    @param HTMLElement el\n  */\n  const Carousel = function(el) {\n    this.config = {\n      delay:          8000,\n      transition:     'slide',\n      touchthreshold: 80,\n      // This must at least be 1 (no rubber band effect)\n      swipeRubberBand: 1\n    };\n\n    const _ds = el.dataset,\n      _cfg = this.config;\n\n    carousels.push(this);\n\n    this.element       = el;\n    this.useIndicators = _ds.carouselIndicators !== undefined;\n    // Storage for Carousel.Indicator objects\n    this.indicators    = [];\n    this.slider        = h.getByClass(el, 'carousel-slider', true);\n    // Storage for Carousel.Item objects\n    this.items         = [];\n    // Interval ID for transitions between items\n    this.ivalId        = null;\n    // Current item\n    this.currPos       = 0;\n    // Flag for if multiple image sources are used.\n    // -1 = not checked\n    //  0 = no\n    //  1 = yes\n    this._hasmedia     = -1;\n\n    // If non-zero the swipe threshold is in percentage of the screen width\n    this._percentTouchThreshold = 0;\n\n    this.wrapper = el.dataset.carouselWrapper;\n\n    if (this.wrapper) {\n      this.wrapper = h.closest(el, this.wrapper);\n    }\n\n    this.staticTextElem = h.getByClass(el, 'carousel-static-text', true);\n\n    if (isTouch) {\n      this.element.classList.add('carousel-is-touch');\n    }\n\n    let items = h.getByClass(this.slider, 'carousel-item');\n    let pos = 0, tmp;\n\n    h.each(items, el => {\n      this.items.push(new Carousel.Item(el, pos++, this));\n    });\n\n    if (this.wrapper) {\n      let addResize = false;\n      for (let i = 0; i < this.items.length; i++) {\n        if (this.items[i].autoHeight) {\n          addResize = true;\n          break;\n        }\n      }\n\n      if (addResize) {\n        window.addEventListener(\n          'resize',\n          h.debounce(() => {\n            this.setAutoHeight();\n          }, 100),\n          true\n        );\n      }\n    }\n\n    if (_ds.carouselDelay) {\n      _cfg.delay = parseInt(_ds.carouselDelay, 10);\n    }\n\n    if (_ds.carouselTransition) {\n      _cfg.transition = _ds.carouselTransition;\n    }\n\n    if (isTouch && _ds.carouselTouchThreshold) {\n      tmp = _ds.carouselTouchThreshold;\n      if (tmp[tmp.length - 1] === '%') {\n        this._percentTouchThreshold = parseInt(tmp, 10);\n        h.setPercentTouchThreshold(this._percentTouchThreshold, _cfg);\n      }\n      else {\n        _cfg.touchthreshold = parseInt(tmp, 10);\n      }\n    }\n\n    if (_ds.carouselRubberbandSwipe) {\n      tmp = parseFloat(_ds.carouselRubberbandSwipe, 10);\n\n      if (tmp > 1) {\n        _cfg.swipeRubberBand = tmp;\n      }\n    }\n\n    if (this.items.length) {\n      this.items[0].load();\n      this.items[0].activate();\n    }\n\n    if (this.items.length > 1) {\n      this.items[1].load();\n      this._makeIndicators();\n    }\n\n    if (isTouch) {\n      this._setupTouchEvents();\n    }\n\n    if (this.items.length > 1) {\n      this.play();\n    }\n  };\n\n  /*\n    Toggle add/remove the animate class on the slider\n  */\n  Carousel.prototype.sliderAnimate = function(on) {\n    if (on) {\n      this.slider.classList.add('animate');\n    }\n    else {\n      this.slider.classList.remove('animate');\n    }\n  };\n\n  Carousel.prototype.currentItem = function() {\n    return this.items[this.currPos];\n  };\n\n  /*\n    Start the auto play\n  */\n  Carousel.prototype.play = function() {\n    if (this.ivalId) {\n      clearTimeout(this.ivalId);\n    }\n\n    const my = this;\n\n    this.ivalId = setTimeout(() => {\n      my.next();\n      my.play();\n    }, this.config.delay);\n  };\n\n  /*\n    Pause the auto play\n  */\n  Carousel.prototype.pause = function() {\n    clearTimeout(this.ivalId);\n    this.sliderAnimate(false);\n  };\n\n  /*\n    Move to the next item\n  */\n  Carousel.prototype.next = function() {\n    this.currPos += 1;\n    if (this.currPos >= this.items.length) {\n      this.currPos = 0;\n    }\n\n    this.goto(this.currPos);\n  };\n\n  /*\n    Goto the item at @pos\n  */\n  Carousel.prototype.goto = function(pos) {\n    if (pos < 0) {\n      pos = this.items.length - 1;\n    }\n    else if (pos >= this.items.length) {\n      pos = 0;\n    }\n\n    const next_prev = pos < this.currPos ? pos - 1 : pos + 1;\n\n    clearTimeout(this.ivalId);\n\n    this.sliderAnimate(true);\n    this._loadIfNecessary(pos);\n    this._loadIfNecessary(next_prev);\n    this.setIndicator(pos);\n    this.slider.dataset.carouselPos = pos;\n    this.currPos = pos;\n    this.items[pos].activate();\n    this.play();\n  };\n\n  /*\n    Check if any of the images in the items has multiple images for different\n    device widths\n  */\n  Carousel.prototype.hasMediaQueries = function() {\n    if (this._hasmedia !== -1) {\n      return !!this._hasmedia;\n    }\n\n    h.each(this.items, item => {\n      if (item.hasMediaQueries) {\n        this._hasmedia = 1;\n        return false;\n      }\n    });\n\n    if (this._hasmedia === -1) {\n      this._hasmedia = 0;\n    }\n\n    return !!this._hasmedia;\n  };\n\n\n  /*\n    Media has changes, change images in the items if neccessary\n  */\n  Carousel.prototype.changeMedia = function(size) {\n    if (this._percentTouchThreshold) {\n      h.setPercentTouchThreshold(this._percentTouchThreshold, this.config);\n    }\n\n    h.each(this.items, item => {\n      if (item.hasMediaQueries) {\n        item.changeMedia(size);\n      }\n    });\n\n    this.setAutoHeight();\n  };\n\n\n  /*\n    Load the image in item @pos if it's not already loaded\n  */\n  Carousel.prototype._loadIfNecessary = function(pos) {\n    if (pos >= 0 && pos < this.items.length) {\n      if (!this.items[pos].isLoaded) {\n        this.items[pos].load();\n      }\n    }\n  };\n\n\n  /*\n    Setup touch events\n  */\n  Carousel.prototype._setupTouchEvents = function() {\n    // Used to store the touch start/drag positions\n    const x = {\n      x: 0,\n      y: 0,\n      startX: 0\n    };\n\n    const _ = this;\n\n    const getEvent = function(e) {\n      return e.changedTouches[0];\n    };\n\n    const initStart = function(e) {\n      x.x = e.clientX;\n      x.y = e.clientY;\n      x.startX = e.clientX;\n    };\n\n    const slider = this.slider;\n\n    let abort = false;\n    let touchendIval;\n\n    slider.addEventListener('touchstart', e => {\n      if (touchendIval) {\n        clearTimeout(touchendIval);\n      }\n      const te = getEvent(e);\n      initStart(te);\n      this.element.classList.add('carousel-is-touchdrag');\n      _.pause();\n    }, false);\n\n    slider.addEventListener('touchend', e => {\n      touchendIval = setTimeout(() => {\n        _.element.classList.remove('carousel-is-touchdrag');\n      }, 1000);\n\n\n      // The rotation has occured in touchmove so abort.\n      if (abort) {\n        abort = false;\n        return;\n      }\n\n      const te = getEvent(e);\n      let diff = te.clientX - x.x;\n\n      if (Math.abs(diff) < _.config.touchthreshold) {\n        _.sliderAnimate(true);\n        requestAnimationFrame(() => {\n          slider.style.removeProperty('left');\n        });\n      }\n\n      _.play();\n\n    }, false);\n\n    slider.addEventListener('touchcancel', () => {\n      _.element.classList.remove('carousel-is-touchdrag');\n      slider.style.removeProperty('left');\n      _.play();\n    }, false);\n\n    const touchMove = (e) => {\n      const te        = getEvent(e);\n      const diff      = te.clientX - x.x;\n      const startDiff = te.clientX - x.startX;\n      const left      = slider.offsetLeft;\n      x.x = te.clientX;\n      let nleft = left+(diff/(_.config.swipeRubberBand||1));\n\n      if (Math.abs(startDiff) > _.config.touchthreshold) {\n        e.preventDefault();\n        abort = true;\n\n        slider.style.removeProperty('left');\n        slider.removeEventListener('touchmove', touchMove, false);\n\n        if (diff > 0) {\n          _._loadIfNecessary(_.currPos-1);\n          _.goto(_.currPos-1);\n        }\n        else if (diff < 0) {\n          _._loadIfNecessary(_.currPos+1);\n          _.goto(_.currPos+1);\n        }\n\n        setTimeout(() => {\n          initStart(te);\n          setTouchMove();\n        }, 600);\n\n        return false;\n      }\n\n      slider.style.left = nleft + 'px';\n    };\n\n    const setTouchMove = () => {\n      slider.addEventListener('touchmove', touchMove, false);\n    };\n\n    setTouchMove();\n  };\n\n  /*\n    Create the indicators\n  */\n  Carousel.prototype._makeIndicators = function() {\n    if (!this.useIndicators || this.items.length < 2) {\n      return;\n    }\n\n    let ind = h.getByClass(this.element, 'carousel-indicators', true);\n    const inds = [];\n\n    if (!ind) {\n      ind = h.mkel('div', { class: 'carousel-indicators' });\n    }\n\n    this.items.forEach(() => {\n      const i = new Carousel.Indicator(this, inds.length);\n      ind.appendChild(i.btn);\n      inds.push(i);\n    });\n\n    inds[0].activate();\n\n    this.element.appendChild(ind);\n    this.indicators = inds;\n  };\n\n  /*\n    Activate the indicator at position @index\n  */\n  Carousel.prototype.setIndicator = function(index) {\n    if (!this.useIndicators || this.items.length < 2) {\n      return;\n    }\n\n    if (index === undefined) {\n      index = this.currPos;\n    }\n\n    this.currPos = index;\n\n    this.indicators.forEach(ind => {\n      ind.deActivate();\n    });\n\n    this.indicators[index].activate();\n  };\n\n  Carousel.prototype.setAutoHeight = function() {\n    if (this.wrapper) {\n      const ci = this.currentItem();\n\n      if (ci.autoHeight) {\n        const calcHeight = () => {\n          const tmp = h.mkel('img', { src: ci.img.src, width: ci.img.width });\n          tmp.style.visibility = 'hidden';\n          tmp.style.position = 'absolute';\n          document.body.appendChild(tmp);\n          const height = tmp.height;\n          document.body.removeChild(tmp);\n          return height;\n        };\n\n        const wait = () => {\n          if (ci.isLoaded) {\n            const height = calcHeight();\n            this.wrapper.classList.add('carousel-auto-height');\n            this.wrapper.style.height = height + 'px';\n            this.wrapper.style.minHeight = '0px';\n          }\n          else {\n            requestAnimationFrame(wait);\n          }\n        };\n\n        wait();\n      }\n      else  {\n        this.wrapper.classList.remove('carousel-auto-height');\n        this.wrapper.style.removeProperty('height');\n        this.wrapper.style.removeProperty('min-height');\n      }\n    }\n  };\n\n  /*\n    If defined and a function it will be called on eventual clicks.\n    Return false to abort click.\n\n    Carousel.clickBack = function(item) {\n      // To something...\n      return false;\n    };\n  */\n  Carousel.clickBack = null;\n\n  /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*\n   |                                                                         |\n   *                            Carousel.Item                                *\n   |                                                                         |\n   *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*/\n\n  Carousel.Item = function(el, pos, owner) {\n    this.mediaQueries    = {};\n    this.hasMediaQueries = false;\n    this.img             = h.getByTag(el, 'img', true);\n    this.element         = el;\n    this.isLoaded        = false;\n    this.src             = null;\n    this.credit          = null;\n    this.mediaSizes      = null;\n    this.href            = el.dataset.carouselHref;\n    this.position        = pos;\n    this.hasImg          = this.img.length === undefined;\n    this.carousel        = owner;\n    this.keepImg         = el.dataset.carouselKeepImg !== undefined;\n    this.autoHeight      = el.dataset.carouselAutoHeight !== undefined;\n    this.creditElem      = h.mkel('div', { class: 'carousel-photo-credit ' +\n                                                  'carousel-hidden' });\n\n    if (this.keepImg) {\n      this.element.classList.add('carousel-item-keep-img');\n    }\n\n    this.element.setAttribute('data-carousel-position', pos);\n    this.element.appendChild(this.creditElem);\n\n    if (this.href) {\n      el.addEventListener('click', (e) => {\n        e.preventDefault();\n        if (typeof Carousel.clickBack === 'function') {\n          const res = Carousel.clickBack(this);\n          if (res === false) {\n            return;\n          }\n        }\n        document.location.href = this.href;\n      }, true);\n    }\n\n    if (this.hasImg) {\n      this.defaultSrc = this.img.dataset.carouselSrc;\n      this.defaultCred = this.img.dataset.carouselPhotoCredit;\n      this._collectMediaSizes();\n\n      const keys = Object.keys(this.mediaQueries).sort();\n      let k;\n\n      for (let i = 0; i < keys.length; i++) {\n        k = keys[i];\n\n        if (window.matchMedia(k).matches) {\n          this.src = this.mediaQueries[k];\n          if (typeof this.src === 'object') {\n            this.credit = this.src.credit;\n            this.src = this.src.img;\n          }\n        }\n      }\n\n      if (!this.src) {\n        this.src = this.defaultSrc;\n      }\n\n      if (!this.credit) {\n        this.credit = this.defaultCred;\n      }\n\n      if (!this.keepImg) {\n        this.img.style.display = 'none';\n      }\n    }\n  };\n\n  Carousel.Item.prototype.activate = function() {\n    this.carousel.setAutoHeight();\n\n    const st = this.carousel.staticTextElem;\n    if (st) {\n      const cb = () => {\n        document.location.href = this.href;\n      };\n      if (st._cb) {\n        st.removeEventListener('click', st._cb);\n      }\n      if (this.href) {\n        st.addEventListener('click', cb, false);\n        st._cb = cb;\n        st.style.cursor = 'pointer';\n      }\n      else {\n        st.style.cursor = 'default';\n      }\n    }\n  };\n\n  /*\n    Load the image matching the media size @size\n  */\n  Carousel.Item.prototype.changeMedia = function(size) {\n    const src = this.mediaQueries[size] || this.defaultSrc;\n\n    if (typeof src === 'object') {\n      this.src = src.img || this.defaultSrc;\n      this.credit = src.credit || this.defaultCred;\n    }\n    else {\n      this.src = src;\n      this.credit = this.defaultCred;\n    }\n\n    if (this.isLoaded) {\n      this.load();\n    }\n  };\n\n\n  /*\n    Collect eventual multiple media size image sources\n  */\n  Carousel.Item.prototype._collectMediaSizes = function() {\n    let m, sizes = [], sizesrc = {}, cred = {};\n\n    for (let a in this.img.dataset){\n      m = a.match(/(?:carousel)Mq-(\\d+)$/);\n\n      if (m) {\n        this.hasMediaQueries = true;\n        m = parseInt(m[1], 10);\n        sizes.push(m);\n        sizesrc[m] = this.img.dataset[a];\n      }\n      else {\n        m = a.match(/(?:carouselPhotoCredit)Mq-(\\d+)$/);\n        if (m) {\n          m = parseInt(m[1], 10);\n          cred[m] = this.img.dataset[a];\n        }\n      }\n    }\n\n    let slen = sizes.length;\n\n    if (slen) {\n      let a, str, val;\n      sizes.sort();\n\n      for (let i = 0; i < slen; i++) {\n        a   = sizes[i];\n        str = `(min-width: ${a+1}px)`;\n\n        if (i + 1 < sizes.length) {\n          str = `(max-width: ${sizes[i+1]}px) and ` + str;\n        }\n\n        val = sizesrc[a];\n\n        if (cred[a]) {\n          val = { img: val, credit: cred[a] };\n        }\n\n        this.mediaQueries[str] = val;\n        h.addMediaQuery(str);\n      }\n\n      this.mediaSizes = sizes;\n    }\n  };\n\n  /*\n    Load the current image source.\n  */\n  Carousel.Item.prototype.load = function() {\n    if (this.hasImg) {\n      this._setSrc(this.src);\n    }\n  };\n\n  /*\n    Set the src attribute to @src and add it as background image on the\n    item when the image is loaded.\n  */\n  Carousel.Item.prototype._setSrc = function(src) {\n    if (this.hasImg) {\n      this.isLoaded = false;\n      let imgsrc = src;\n\n      if (typeof src === 'object') {\n        imgsrc = src.img;\n      }\n\n      this.img.setAttribute('src', imgsrc);\n      this.img.onload = () => {\n        if (!this.keepImg) {\n          this.element.style.backgroundImage = `url(${imgsrc})`;\n        }\n        this.isLoaded = true;\n      };\n\n      if (this.credit) {\n        this.creditElem.textContent = this.credit;\n        this.creditElem.classList.remove('carousel-hidden');\n      }\n      else {\n        this.creditElem.textContent = '';\n        this.creditElem.classList.add('carousel-hidden');\n      }\n    }\n  };\n\n  /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*\n   |                                                                         |\n   *                          Carousel.Indicator                             *\n   |                                                                         |\n   *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*/\n\n  Carousel.Indicator = function(owner, index) {\n    const _ = this;\n    this.index = index;\n    this.owner = owner;\n    this.btn = h.mkel('a', { class: 'carousel-indicator',\n                             href: '#carousel-' + index });\n    this.btn.appendChild(h.mkel('span', { class: 'carousel-indicator-inner' }));\n    this.btn.addEventListener('click', (e) => {\n      e.preventDefault();\n      _.owner.goto(_.index);\n      return false;\n    }, true);\n  };\n\n  /*\n    Activate this indicator\n  */\n  Carousel.Indicator.prototype.activate = function() {\n    this.btn.classList.add('carousel-indicator-active');\n  };\n\n  /*\n    Deactivate this indicator\n  */\n  Carousel.Indicator.prototype.deActivate = function() {\n    this.btn.classList.remove('carousel-indicator-active');\n  };\n\n  window.addEventListener('DOMContentLoaded', () => {\n    const cs = h.getByClass(document, 'carousel');\n\n    if (cs && cs.length) {\n      h.each(cs, el => {\n        new Carousel(el);\n      });\n    }\n  });\n\n  Carousel.carousels = carousels;\n  window.Carousel = Carousel;\n\n}(window, document, window.navigator));\n"]}